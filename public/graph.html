<!DOCTYPE html>
<html>

  <head>

    <meta charset="utf-8">
    <title>BⱯBEL Rëvoluθion</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://apis.google.com/js/api.js"></script>

    <link rel="icon" href="img/icone-babel.png" type="image/png">
    
    <link rel="stylesheet" href="style/style.css">
    <link rel="stylesheet" href="style/graph.css">

  </head>

  <body onload="onLoadGraph()">

    <div id="container">

      <header>
        <h1>BⱯBEL RËVOLUㅏION</h1>
      </header>

      <button id="button-decree2" style="display:none" onclick="window.location.href = 'index.html?decree=2'">Décret 2</button>
      <button id="button-decree3" style="display:none" onclick="window.location.href = 'index.html?decree=3'">Décret 3</button>
      <button id="button-end" style="display:none" onclick="alert('Le soulèvement populaire s’organise de manière auto-gérée, prend de l’ampleur  et parvient à renverser le pouvoir en place pour imposer une politique écolinguistique ouverte à la diversité des langues, des cultures et des espèces. Et on commence par limiter le recours au numérique, très coûteux pour l’environnement, en éteignant/détruisant la Matrice. \n [fin temporaire] ')">Fin</button>
      

      <div id="main">

        <div id="graph"></div>
        
          <div id="text-box" style="display:flex"> <!-- right zone-->

            <div id="about">
              <h3 id="title-with-toggle">à propos</h3>
              <button type="button" id="button-toggle-about" class="button-toggle-down" onclick="toggle(this.id, 'about-text')"></button>

              <div id="about-text" style="display:none">
                <p>Texte à propos du projet</p>
              </div>
              
            </div>

            <div id="messages">
              <h3 id="title-with-toggle">messages</h3>
              <button type="button" id="button-toggle-messages" class="button-toggle-down" onclick="toggle(this.id, 'messages-inside')"></button>

              <div id="messages-inside" style="display:none">

                <h5 id="title-with-toggle">écrire un message</h5>
                <button type="button" id="button-toggle-writing" class="button-toggle-down" onclick="toggle(this.id, 'add-node-form')"></button>
                <form id="add-node-form" style="display:none">
                  <input required id="add-node-author" class="input" type="text" placeholder="Add an author...">
                  <input required id="add-node-text" class="input" type="text" placeholder="Add a text...">
                  <input required id="add-node-hashtags" class="input" type="text" placeholder="Add a hashtag...">
                  <button id="add-node-button" type="submit">Add</button>
                  <button id="reset-graph" type="button">Reset graph</button>
                </form>

                <div id="node-info">
                  <h4 id="node-title" style="display:none">Publication</h4> 
                  <div id="node-text"></div>
                  <div id="node-hashtags"></div>
                </div>


              </div>
              
            </div>
            

          </div>

      </div>


    </div>

    <script type="module" src="src/app.js"></script>
    <script src="src/story.js"></script>
    <script src="src/interface.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script>
      $(function(){
        let socket = io();

        socket.on("databaseUpdate", ()=>{
          console.log("BDD mise à jour");
          location.reload();
        });

        $("form").submit(function(){
          socket.emit("databaseUpdate");
        })
      });
    </script>
    </body>
 </html>